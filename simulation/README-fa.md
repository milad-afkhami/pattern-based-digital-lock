> **[๐ฌ๐ง English Version](README.md)**

# ูุงูโูุง Simulation (`simulation/`)

ุงู ุฏุงุฑฺฉุชูุฑ ูุงูโูุง waveform ุชููุฏ ุดุฏู ุฏุฑ ุทูู simulation ุฑุง ุฐุฎุฑู ูโฺฉูุฏ.

---

## ูุญุชูุงุช

ูพุณ ุงุฒ ุงุฌุฑุง testbenchโูุงุ ุงู ุฏุงุฑฺฉุชูุฑ ุญุงู ูุงูโูุง waveform `.ghw` ุงุณุช:

| ูุงู | Testbench ููุจุน |
|------|--------------|
| `tb_digital_lock.ghw` | Unit testโูุง FSM |
| `tb_top_level.ghw` | ุชุณุชโูุง ุณุณุชู ฺฉุงูู |
| `tb_fsm_coverage.ghw` | Coverage testโูุง |
| `tb_edge_cases.ghw` | Edge case testโูุง |
| `tb_debouncer.ghw` | Debouncer testโูุง |

<details>
<summary>ูุงูโูุง .ghw ฺุณุชุ</summary>

ูุงูโูุง GHW (GHDL Waveform) ุญุงู ููุงุฏุฑ signal ุถุจุท ุดุฏู ุฏุฑ ุทูู simulation ูุณุชูุฏ. ุขููุง ูุงููุฏ ฺฉ "ุฌุนุจู ุณุงู" ูุณุชูุฏ ฺฉู ูุฑ ุชุบุฑ signal ุฑุง ุถุจุท ูโฺฉููุฏ ู ุจู ุดูุง ุงูฺฉุงู ุชุญูู ุขูฺู ุฏุฑ ุทูู ุชุณุช ุงุชูุงู ุงูุชุงุฏู ุฑุง ูโุฏููุฏ.

</details>

---

## ูุดุงูุฏู Waveformโูุง

### ุจุงุฒ ฺฉุฑุฏู ุจุง GTKWave

```bash
# ูุดุงูุฏู ูุฑ ูุงู waveform
gtkwave tb_digital_lock.ghw

# ุง ุงุฒ root ูพุฑูฺู
gtkwave simulation/tb_digital_lock.ghw
```

### ุฑุงูููุง ุณุฑุน GTKWave

1. **ุงูุฒูุฏู signalโูุง**:
   - ูพูู ฺูพ: hierarchy ุฑุง ุจุงุฒ ฺฉูุฏ (ุฑู `+` ฺฉูฺฉ ฺฉูุฏ)
   - ุฑู ูุงู signalโูุง ุฏูุจุงุฑ ฺฉูฺฉ ฺฉูุฏ ุชุง ุงุถุงูู ุดููุฏ

2. **Navigation**:
   - ฺุฑุฎ ูุงูุณ: zoom in/out
   - ฺฉูฺฉ ุฑู timeline: ุฌุงุจุฌุง cursor
   - Ctrl+ฺฉูฺฉ: ฺฏุฐุงุดุชู marker

3. **ูุงูุจุฑูุง ููุฏ**:
   - `+` / `-`: zoom
   - `Home`: ุฑูุชู ุจู ุงุจุชุฏุง
   - `End`: ุฑูุชู ุจู ุงูุชูุง
   - `Left`/`Right`: ุฌุงุจุฌุง cursor

<details>
<summary>ุชูุธู ูพุดููุงุฏ signal ุจุฑุง debugging</summary>

ุจุฑุง debugging ููู ุฏุฌุชุงูุ ุงู signalโูุง ุฑุง ุงุถุงูู ฺฉูุฏ:

```
tb_digital_lock
โโโ clk
โโโ reset
โโโ button_A
โโโ button_B
โโโ button_C
โโโ button_D
โโโ lock_status
โโโ uut (ุจุงุฒ ฺฉุฑุฏู)
    โโโ current_state
    โโโ next_state
    โโโ unlock_timer
    โโโ timer_expired
```

Layout signal ุฑุง ุฐุฎุฑู ฺฉูุฏ: File โ Write Save File

</details>

---

## ุชููุฏ Waveformโูุง

Waveformโูุง ุจุง flag `--wave` ุชููุฏ ูโุดููุฏ:

```bash
ghdl -r --std=08 tb_digital_lock --wave=simulation/tb_digital_lock.ghw
```

### ฺฏุฒููโูุง ุฎุฑูุฌ ุฏฺฏุฑ

```bash
# ูุฑูุช VCD (ุฌูุงูโุชุฑุ ูุงูโูุง ุจุฒุฑฺฏโุชุฑ)
ghdl -r --std=08 tb_digital_lock --vcd=simulation/tb_digital_lock.vcd

# ูุฑูุช FST (ูุดุฑุฏูุ ููุงุณุจ ุจุฑุง designโูุง ุจุฒุฑฺฏ)
ghdl -r --std=08 tb_digital_lock --fst=simulation/tb_digital_lock.fst
```

---

## ูพุงฺฉโุณุงุฒ

ูุงูโูุง waveform ูโุชูุงููุฏ ุจุฒุฑฺฏ ุจุงุดูุฏ. ุจุฑุง ูพุงฺฉโุณุงุฒ:

```bash
# ุญุฐู ููู ูุงูโูุง waveform
rm simulation/*.ghw
rm simulation/*.vcd
rm simulation/*.fst
```

---

## ุงูุฏุงุฒู ูุงูโูุง

ุงูุฏุงุฒูโูุง ูุนููู ุจุฑุง ุงู ูพุฑูฺู:

| ุชุณุช | ูุฏุช | ุงูุฏุงุฒู ูุงู |
|-----|-----|-------------|
| tb_digital_lock | ~1ฮผs | ~50 KB |
| tb_top_level | ~5ฮผs | ~200 KB |
| tb_edge_cases | ~10ฮผs | ~500 KB |

<details>
<summary>ฺฉุงูุด ุงูุฏุงุฒู ูุงูโูุง</summary>

ุจุฑุง simulationโูุง ุทููุงูุ ุงูุฏุงุฒู ูุงูโูุง ูโุชูุงูุฏ ุจุฒุฑฺฏ ุดูุฏ. ฺฏุฒููโูุง:

1. **Simulationโูุง ฺฉูุชุงูโุชุฑ**: ุงุฒ ููุงุฏุฑ timing ฺฉูฺฺฉโุชุฑ ุงุณุชูุงุฏู ฺฉูุฏ
2. **Signalโูุง ฺฉูุชุฑ**: ุงุฒ `--wave` ููุท ุจุง signalโูุง ุฎุงุต ุงุณุชูุงุฏู ฺฉูุฏ
3. **ูุฑูุช FST**: ูุดุฑุฏูโุชุฑ ุงุฒ GHW/VCD
4. **ุฐุฎุฑู ูฺฉูุฏ**: ุงฺฏุฑ ูุงุฒ ูุฏุงุฑุฏ `--wave` ุฑุง ุญุฐู ฺฉูุฏ

</details>

---

## ุชูุฌู

ุงู ุฏุงุฑฺฉุชูุฑ ูุนูููุงู ุฏุฑ `.gitignore` ุงุณุช ุฒุฑุง ูุงูโูุง waveform:
- Generated ูุณุชูุฏุ ูู source code
- ูโุชูุงููุฏ ุจุฒุฑฺฏ ุจุงุดูุฏ
- ุจุง ุงุฌุฑุง simulationโูุง ุจู ุฑุงุญุช ุฏูุจุงุฑู ุชููุฏ ูโุดููุฏ
